-- MySQL dump 10.13  Distrib 8.0.31, for Win64 (x86_64)
--
-- Host: development-host    Database: financasdb
-- ------------------------------------------------------
-- Server version	8.0.37-azure

--
-- Table structure for table `tb_account`
--

/*ALTER USER 'root'@'localhost' IDENTIFIED BY '5afâ‚¬-p@55w0rd';*/

CREATE DATABASE IF NOT EXISTS financasdb;

USE financasdb;

SET GLOBAL host_cache_size=0;

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO';
SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0;

--
-- Table structure for table `tb_user`
--

DROP TABLE IF EXISTS `TB_USER`;

CREATE TABLE `TB_USER` (
  `COD_USER_ID` int unsigned NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `TXT_UUID` varchar(36) NOT NULL COMMENT 'Another PK as GUID',
  `TXT_NAME` varchar(256) NOT NULL,
  `TXT_EMAIL` varchar(255) NOT NULL,
  `TXT_PASSWORD` varchar(128) NOT NULL,
  `TIP_ROLE` int unsigned NOT NULL DEFAULT '2',
  `FLG_ACTIVE` tinyint NOT NULL DEFAULT '1',
  `B64_IMAGE` longtext,
  `DAT_CREATED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DAT_UPDATED` timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
  `DAT_DELETED` timestamp(6) NULL DEFAULT NULL,
  PRIMARY KEY (`COD_USER_ID`),
  UNIQUE KEY `IDX_USER_UUID` (`TXT_UUID`),
  UNIQUE KEY `IDX_USER_NAME` (`TXT_NAME`),
  UNIQUE KEY `IDX_USER_EMAIL` (`TXT_EMAIL`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;


DROP TABLE IF EXISTS `TB_ACCOUNT`;

--
-- Table structure for table `tb_account`
--

CREATE TABLE `TB_ACCOUNT` (
  `COD_ACCOUNT_ID` int unsigned NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `TXT_UUID` varchar(36) NOT NULL COMMENT 'Another PK as GUID',
  `TXT_NAME` varchar(255) NOT NULL,
  `TXT_DESCRIPTION` varchar(255) NOT NULL,
  `NUM_BALANCE_CREDIT` int NOT NULL DEFAULT '0',
  `NUM_BALANCE_DEBIT` int NOT NULL DEFAULT '0',
  `NUM_BALANCE_FUTURE` int NOT NULL DEFAULT '0',
  `NUM_BALANCE_CONSOLIDATED` int NOT NULL DEFAULT '0',
  `COD_USER_ID` int unsigned DEFAULT NULL,
  `FLG_ACTIVE` tinyint NOT NULL DEFAULT '1',
  `DAT_CREATED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DAT_UPDATED` timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
  `DAT_DELETED` timestamp(6) NULL DEFAULT NULL,
  PRIMARY KEY (`COD_ACCOUNT_ID`),
  UNIQUE KEY `IDX_ACCOUNT_UUID` (`TXT_UUID`),
  KEY `FK_ACCOUNT_USER` (`COD_USER_ID`),
  CONSTRAINT `FK_ACCOUNT_USER` FOREIGN KEY (`COD_USER_ID`) REFERENCES `TB_USER` (`COD_USER_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

--
-- Table structure for table `tb_accounting_entry`
--

DROP TABLE IF EXISTS `TB_ACCOUNTING_ENTRY`;

CREATE TABLE `TB_ACCOUNTING_ENTRY` (
  `COD_ACCOUNTING_ENTRY_ID` int unsigned NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `TXT_UUID` varchar(36) DEFAULT NULL COMMENT 'Another PK as GUID',
  `COD_ENTRY_TYPE` varchar(255) NOT NULL,
  `TXT_TITLE` varchar(255) NOT NULL,
  `TXT_DESCRIPTION` varchar(255) NOT NULL,
  `DAT_DATE` date NOT NULL,
  `NUM_VALUE` decimal(10,2) NOT NULL,
  `TXT_CATEGORIES` varchar(255) DEFAULT NULL,
  `B64_IMAGE` text,
  `COD_ACCOUNT_ID` int unsigned NOT NULL,
  `DAT_CREATED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DAT_UPDATED` timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
  `DAT_DELETED` timestamp(6) NULL DEFAULT NULL,
  PRIMARY KEY (`COD_ACCOUNTING_ENTRY_ID`),
  UNIQUE KEY `IDX_ACCOUNTING_ENTRY_UUID` (`TXT_UUID`),
  KEY `FK_ACCOUNTING_ENTRY_ACCOUNT` (`COD_ACCOUNT_ID`),
  CONSTRAINT `FK_ACCOUNTING_ENTRY_ACCOUNT` FOREIGN KEY (`COD_ACCOUNT_ID`) REFERENCES `TB_ACCOUNT` (`COD_ACCOUNT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;


--
-- Table structure for table `tb_authentication`
--

DROP TABLE IF EXISTS `TB_AUTHENTICATION`;

CREATE TABLE `TB_AUTHENTICATION` (
  `COD_AUTHENTICATION_ID` int unsigned NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `TXT_UUID` varchar(36) NOT NULL COMMENT 'Another PK as GUID',
  `TXT_TOKEN` text NOT NULL,
  `COD_USER_ID` int unsigned DEFAULT NULL,
  `DAT_CREATED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DAT_UPDATED` timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
  `DAT_DELETED` timestamp(6) NULL DEFAULT NULL,
  PRIMARY KEY (`COD_AUTHENTICATION_ID`),
  UNIQUE KEY `IDX_AUTHENTICATION_UUID` (`TXT_UUID`),
  KEY `FK_AUTHENTICATION_USER` (`COD_USER_ID`),
  CONSTRAINT `FK_AUTHENTICATION_USER` FOREIGN KEY (`COD_USER_ID`) REFERENCES `TB_USER` (`COD_USER_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

--
-- Table structure for table `tb_notification`
--

DROP TABLE IF EXISTS `TB_NOTIFICATION`;

CREATE TABLE `TB_NOTIFICATION` (
  `COD_NOTIFICATION_ID` int unsigned NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
  `TXT_UUID` varchar(36) NOT NULL COMMENT 'Another PK as GUID',
  `TXT_MESSAGE` varchar(255) NOT NULL,
  `COD_USER_ID` int unsigned DEFAULT NULL COMMENT 'Define IF this notificatios is to an user or a broadcast message',
  `DAT_CREATED` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DAT_UPDATED` timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
  `DAT_DELETED` timestamp(6) NULL DEFAULT NULL,
  PRIMARY KEY (`COD_NOTIFICATION_ID`),
  UNIQUE KEY `IDX_NOTIFICATION_UUID` (`TXT_UUID`),
  KEY `FK_NOTIFICATION_USER` (`COD_USER_ID`),
  CONSTRAINT `FK_NOTIFICATION_USER` FOREIGN KEY (`COD_USER_ID`) REFERENCES `TB_USER` (`COD_USER_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
SET SQL_NOTES=@OLD_SQL_NOTES;

-- Dump completed
